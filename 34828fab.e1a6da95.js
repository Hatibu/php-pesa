(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{73:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return s}));var r=n(3),a=n(7),o=(n(0),n(91)),i={id:"c2b",title:"Customer to bussiness transactions",description:"Customer to bussines transactions fundamentals"},l={unversionedId:"tutorials/c2b",id:"tutorials/c2b",isDocsHomePage:!1,title:"Customer to bussiness transactions",description:"Customer to bussines transactions fundamentals",source:"@site/docs/tutorials/c2b.md",slug:"/tutorials/c2b",permalink:"/php-pesa/tutorials/c2b",editUrl:"https://github.com/openpesa/php-pesa/edit/main/docs/tutorials/c2b.md",version:"current",sidebar:"someSidebar",previous:{title:"Quick Guide",permalink:"/php-pesa/guide/quick_guide"},next:{title:"Bussiness to customer",permalink:"/php-pesa/tutorials/b2c"}},c=[{value:"How to transact from customer to business",id:"how-to-transact-from-customer-to-business",children:[]},{value:"Example Full",id:"example-full",children:[]}],u={toc:c};function s(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"how-to-transact-from-customer-to-business"},"How to transact from customer to business"),Object(o.b)("p",null,"In this course, we will cover what you need to transact from customers to businesses using PHP."),Object(o.b)("p",null,"First set up the application in the portal"),Object(o.b)("p",null,"When building apps on the sandbox application, Using the sandbox API which allows us to test our application logic without incurring any costs."),Object(o.b)("p",null,"At the bottom left corner of the screen there\u2019s a little phone icon, click it and enter your phone number. This will be the test number you\u2019ll be using and is the number we will send the airtime to. Ensure that you\u2019ve edited the phone number variable we wrote earlier to the phone number you\u2019re using on the simulator."),Object(o.b)("p",null,"we will import the required libraries which have already been preinstalled."),Object(o.b)("p",null,"Here\u2019s the code that does this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-php"},"require 'vendor/autoload.php';\nuse Openpesa\\SDK\\Pesa;\n")),Object(o.b)("p",null,"The above code imports the Pesa SDK for us."),Object(o.b)("p",null,"Next, we set our app credentials."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-php"},'$apiKey     = "your_API_key";\n$publicKey  = "your_public_key";\n')),Object(o.b)("p",null,"These are the credentials that we use to authenticate requests to the OpenAPI service."),Object(o.b)("p",null,"Now we are going to initialize the Pesa SDK."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-php"},"$pesa = new Pesa([\n    'api_key' => $apiKey,\n    'public_key' => $publicKey,\n]);\n\n")),Object(o.b)("p",null,"We have just required the Pesa module into our app and assigned it to the ",Object(o.b)("inlineCode",{parentName:"p"},"$pesa")," variable. We initialize it with our ",Object(o.b)("inlineCode",{parentName:"p"},"$api_key")," and ",Object(o.b)("inlineCode",{parentName:"p"},"$public_key")," which will be used to make authenticated calls to the airtime service. Easy right?"),Object(o.b)("p",null,"Now let\u2019s set up our transaction."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-php"},"\n$data = [\n    'input_Amount' => 5000,\n    'input_CustomerMSISDN' => '000000000001',\n    'input_Country' => 'TZN',\n    'input_Currency' => 'TZS',\n    'input_ServiceProviderCode' => '000000',\n    'input_TransactionReference' => 'T12344Z',\n    'input_ThirdPartyConversationID' => '1e9b774d1da34af78412a498cbc28f5d',\n    'input_PurchasedItemsDesc' => 'Test Three Item'\n];\n\n")),Object(o.b)("p",null,"In order to transact from customer to business, you need the following."),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"Attribute"),Object(o.b)("th",{parentName:"tr",align:null},"Desccription"),Object(o.b)("th",{parentName:"tr",align:null},"default"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Amount"),Object(o.b)("td",{parentName:"tr",align:null},"An Amount"),Object(o.b)("td",{parentName:"tr",align:null})),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"CustomerMSISDN"),Object(o.b)("td",{parentName:"tr",align:null},"A CustomerMSISDN"),Object(o.b)("td",{parentName:"tr",align:null})),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Country"),Object(o.b)("td",{parentName:"tr",align:null},"Country"),Object(o.b)("td",{parentName:"tr",align:null},"TZN")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Currency"),Object(o.b)("td",{parentName:"tr",align:null},"Currency"),Object(o.b)("td",{parentName:"tr",align:null},"TZS")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"ServiceProviderCode"),Object(o.b)("td",{parentName:"tr",align:null},"Service Provider Code"),Object(o.b)("td",{parentName:"tr",align:null})),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"TransactionReference"),Object(o.b)("td",{parentName:"tr",align:null},"Transaction Reference"),Object(o.b)("td",{parentName:"tr",align:null},"random number")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"ThirdPartyConversationID"),Object(o.b)("td",{parentName:"tr",align:null},"Purchased Items Desc"),Object(o.b)("td",{parentName:"tr",align:null},"random number")))),Object(o.b)("p",null,"Next up we have a function to execute the transaction right below the ",Object(o.b)("inlineCode",{parentName:"p"},"// Execute transaction")," line."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-php"},"try {\n     // Execute transaction\n    $result = $pesa->transact('c2b', $data);\n    print_r($result);\n} catch (Throwable $th) {\n    echo $th->getMessage();\n}\n\n")),Object(o.b)("p",null,"If the code works and the transaction is successful, it will print the response onto the console logs. If it\u2019s not successful, it will print out an error instead."),Object(o.b)("p",null,"You\u2019re all set!"),Object(o.b)("h2",{id:"example-full"},"Example Full"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-php"},"<?php\nrequire 'vendor/autoload.php';\n\nuse Openpesa\\SDK\\Pesa;\n\n$publicKey = 'MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEArv9yxA69XQKBo24BaF/D+fvlqmGdYjqLQ5WtNBb5tquqGvAvG3WMFETVUSow/LizQalxj2ElMVrUmzu5mGGkxK08bWEXF7a1DEvtVJs6nppIlFJc2SnrU14AOrIrB28ogm58JjAl5BOQawOXD5dfSk7MaAA82pVHoIqEu0FxA8BOKU+RGTihRU+ptw1j4bsAJYiPbSX6i71gfPvwHPYamM0bfI4CmlsUUR3KvCG24rB6FNPcRBhM3jDuv8ae2kC33w9hEq8qNB55uw51vK7hyXoAa+U7IqP1y6nBdlN25gkxEA8yrsl1678cspeXr+3ciRyqoRgj9RD/ONbJhhxFvt1cLBh+qwK2eqISfBb06eRnNeC71oBokDm3zyCnkOtMDGl7IvnMfZfEPFCfg5QgJVk1msPpRvQxmEsrX9MQRyFVzgy2CWNIb7c+jPapyrNwoUbANlN8adU1m6yOuoX7F49x+OjiG2se0EJ6nafeKUXw/+hiJZvELUYgzKUtMAZVTNZfT8jjb58j8GVtuS+6TM2AutbejaCV84ZK58E2CRJqhmjQibEUO6KPdD7oTlEkFy52Y1uOOBXgYpqMzufNPmfdqqqSM4dU70PO8ogyKGiLAIxCetMjjm6FCMEA3Kc8K0Ig7/XtFm9By6VxTJK1Mg36TlHaZKP6VzVLXMtesJECAwEAAQ==';\n$apiKey = '';\n\n$pesa = new Pesa([\n    'api_key' => $apiKey,\n    'public_key' => $publicKey,\n]);\n\n\n$data = [\n    'input_Amount' => 5000,\n    'input_CustomerMSISDN' => '000000000001',\n    'input_Country' => 'TZN',\n    'input_Currency' => 'TZS',\n    'input_ServiceProviderCode' => '000000',\n    'input_TransactionReference' => 'T12344Z',\n    'input_ThirdPartyConversationID' => '1e9b774d1da34af78412a498cbc28f5d',\n    'input_PurchasedItemsDesc' => 'Test Three Item'\n];\n\n\ntry {\n    $result = $pesa->transact('c2b', $data);\n    print_r($result);\n} catch (Throwable $th) {\n    echo $th->getMessage();\n}\n\n\n")),Object(o.b)("p",null,"Happy Coding!! \ud83d\ude00"))}s.isMDXComponent=!0},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=a.a.createContext({}),s=function(e){var t=a.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=s(e.components);return a.a.createElement(u.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=s(n),d=r,m=p["".concat(i,".").concat(d)]||p[d]||b[d]||o;return n?a.a.createElement(m,l(l({ref:t},u),{},{components:n})):a.a.createElement(m,l({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var u=2;u<o;u++)i[u]=n[u];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);